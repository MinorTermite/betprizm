<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a0033">
    <meta name="description" content="üíé PRIZMBET - –ö—Ä–∏–ø—Ç–æ–±—É–∫–º–µ–∫–µ—Ä –Ω–∞ –º–æ–Ω–µ—Ç–∞—Ö PRIZM. –°—Ç–∞–≤–∫–∏ –Ω–∞ —Ñ—É—Ç–±–æ–ª, —Ö–æ–∫–∫–µ–π, –±–∞—Å–∫–µ—Ç–±–æ–ª –∏ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç">
    <title>üíé PRIZMBET - –ö—Ä–∏–ø—Ç–æ–±—É–∫–º–µ–∫–µ—Ä</title>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary-purple: #b967ff;
            --primary-pink: #ff2a9f;
            --neon-purple: #d946ff;
            --neon-pink: #ff00a8;
            --neon-green: #00ff88;
            --neon-blue: #00a8ff;
            --neon-orange: #ff6b00;
            --dark-bg: #0a0015;
            --card-bg: rgba(25, 0, 50, 0.7);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--dark-bg);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        #threejs-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            padding: 20px 0 30px;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤–∏–¥–µ–æ-–ª–æ–≥–æ—Ç–∏–ø */
        .logo-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 15px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 40px rgba(185, 103, 255, 0.6),
                        0 0 80px rgba(255, 42, 159, 0.4),
                        inset 0 0 20px rgba(185, 103, 255, 0.3);
            animation: logoGlow 3s ease-in-out infinite;
            border: 3px solid transparent;
            background: linear-gradient(var(--dark-bg), var(--dark-bg)) padding-box,
                        linear-gradient(135deg, var(--neon-purple), var(--neon-pink)) border-box;
        }

        @keyframes logoGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px var(--neon-purple));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 40px var(--neon-pink)) drop-shadow(0 0 60px var(--neon-purple));
                transform: scale(1.02);
            }
        }

        .logo-video, .logo-fallback {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .logo-video {
            position: absolute;
            top: 0;
            left: 0;
        }

        .logo-fallback {
            position: relative;
        }

        h1 {
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 8px;
            text-shadow: 0 0 30px rgba(185, 103, 255, 0.5);
        }

        .subtitle {
            font-size: 0.95em;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 1px;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-pink));
            border: 2px solid var(--neon-purple);
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 5px;
            display: inline-block;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(185, 103, 255, 0.5);
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .telegram-btn {
            background: linear-gradient(135deg, #0088cc, #00aced);
            border: 2px solid #00aced;
        }

        .section {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 20px 15px;
            margin-bottom: 20px;
            border: 2px solid rgba(185, 103, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            animation: fadeInUp 0.8s ease-out;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(185, 103, 255, 0.4);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--neon-purple);
            text-transform: uppercase;
        }

        .match-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid rgba(185, 103, 255, 0.3);
            transition: all 0.3s;
        }

        .match-card:hover {
            border-color: var(--neon-purple);
            box-shadow: 0 0 20px rgba(185, 103, 255, 0.3);
            transform: translateX(5px);
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .match-id {
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 0.85em;
            font-weight: 700;
        }

        .match-time {
            font-size: 0.85em;
            color: var(--neon-purple);
            font-weight: 600;
        }

        .match-teams {
            font-size: 1.05em;
            font-weight: 600;
            margin: 10px 0;
        }

        .odds-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 12px;
        }

        .odd-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(185, 103, 255, 0.3);
            border-radius: 10px;
            padding: 8px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .odd-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(185, 103, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .odd-item:hover::before {
            left: 100%;
        }

        .odd-item:hover {
            border-color: var(--neon-green);
            background: rgba(185, 103, 255, 0.2);
            transform: scale(1.05);
        }

        .odd-item:active {
            background: rgba(185, 103, 255, 0.3);
            transform: scale(0.95);
        }

        .odd-label {
            font-size: 0.75em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 4px;
        }

        .odd-value {
            font-size: 1.1em;
            font-weight: 700;
            color: #00ff88;
        }

        .wallet-section {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px 20px;
            margin: 25px 0;
            border: 2px solid var(--neon-purple);
            text-align: center;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            border: 3px solid var(--neon-purple);
            border-radius: 15px;
            padding: 10px;
            background: white;
            margin: 20px auto;
            transition: transform 0.3s;
        }

        .qr-code:hover {
            transform: scale(1.05) rotate(2deg);
        }

        .wallet-box {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--neon-purple);
            border-radius: 12px;
            padding: 12px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            word-break: break-all;
            font-size: 0.85em;
        }

        .wallet-address {
            color: #00ff88;
            letter-spacing: 0.5px;
        }

        .rules-section {
            margin: 30px 0;
        }

        .rule-images {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .rule-images {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .rule-image {
            width: 100%;
            border-radius: 15px;
            border: 2px solid var(--neon-purple);
            box-shadow: 0 0 30px rgba(185, 103, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s;
        }

        .rule-image:hover {
            transform: scale(1.02);
            box-shadow: 0 0 40px rgba(185, 103, 255, 0.5);
        }

        .bet-toast {
            position: fixed;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%) translateY(100px);
            background: rgba(12, 5, 28, 0.95);
            border: 2px solid var(--neon-purple);
            border-radius: 18px;
            padding: 16px 20px;
            min-width: 300px;
            max-width: 90vw;
            box-shadow: 0 18px 60px rgba(0, 0, 0, 0.8);
            opacity: 0;
            transition: all 0.4s;
            z-index: 9999;
        }

        .bet-toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .bet-toast-message {
            font-weight: 700;
            font-size: 1.1em;
            color: #00ff88;
            text-align: center;
        }

        /* ===== Filters bar ===== */
        .filters-bar {
            margin: 18px 0 18px;
            padding: 14px 14px;
            border: 1px solid rgba(203, 0, 255, 0.35);
            border-radius: 18px;
            background: rgba(10, 0, 20, 0.55);
            box-shadow: 0 0 24px rgba(203,0,255,0.10);
            backdrop-filter: blur(10px);
        }

        .tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }

        .tab {
            cursor: pointer;
            padding: 10px 14px;
            border-radius: 14px;
            border: 1px solid rgba(203,0,255,0.35);
            background: rgba(20,0,35,0.65);
            color: #fff;
            font-weight: 700;
            letter-spacing: 0.2px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .tab:hover::before {
            left: 100%;
        }

        .tab.active {
            box-shadow: 0 0 18px rgba(203,0,255,0.35);
            background: rgba(203,0,255,0.18);
            transform: scale(1.05);
        }

        /* Sport-specific colors */
        .tab[data-sport="football"] {
            border-color: rgba(0, 255, 136, 0.35);
        }
        .tab[data-sport="football"].active {
            box-shadow: 0 0 18px rgba(0,255,136,0.35);
            background: rgba(0,255,136,0.15);
        }

        .tab[data-sport="hockey"] {
            border-color: rgba(0, 168, 255, 0.35);
        }
        .tab[data-sport="hockey"].active {
            box-shadow: 0 0 18px rgba(0,168,255,0.35);
            background: rgba(0,168,255,0.15);
        }

        .tab[data-sport="basket"] {
            border-color: rgba(255, 107, 0, 0.35);
        }
        .tab[data-sport="basket"].active {
            box-shadow: 0 0 18px rgba(255,107,0,0.35);
            background: rgba(255,107,0,0.15);
        }

        .tab[data-sport="esports"] {
            border-color: rgba(0, 255, 200, 0.35);
        }
        .tab[data-sport="esports"].active {
            box-shadow: 0 0 18px rgba(0,255,200,0.25);
            background: rgba(0,255,200,0.10);
        }

        .filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }

        .select, .search {
            padding: 10px 12px;
            border-radius: 14px;
            border: 1px solid rgba(203,0,255,0.30);
            background: rgba(0,0,0,0.25);
            color: #fff;
            outline: none;
            transition: all 0.3s;
        }

        .select:focus, .search:focus {
            border-color: var(--neon-purple);
            box-shadow: 0 0 10px rgba(203,0,255,0.3);
        }

        .search {
            min-width: 260px;
            flex: 1;
        }

        .checkbox {
            display: flex;
            gap: 8px;
            align-items: center;
            color: rgba(255,255,255,0.9);
            user-select: none;
            padding: 8px 10px;
            border-radius: 14px;
            border: 1px solid rgba(203,0,255,0.20);
            background: rgba(0,0,0,0.20);
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox:hover {
            border-color: var(--neon-purple);
            background: rgba(203,0,255,0.1);
        }

        .checkbox input {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        /* Stats counter */
        .stats-bar {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: 900;
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--neon-purple);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .stats-bar {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .stat-item {
                flex: 1 1 45%;
            }

            .logo-container {
                width: 120px;
                height: 120px;
            }
        }

        @media (max-width: 360px) {
            h1 { font-size: 2em; }
            .btn { padding: 10px 20px; font-size: 0.9em; }
        }

        /* Scroll progress bar */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink), var(--neon-green));
            z-index: 10000;
            transition: width 0.1s;
        }
    </style>
</head>
<body>
    <div class="scroll-progress" id="scrollProgress"></div>
    <canvas id="threejs-bg"></canvas>

    <div class="container">
        <!-- FILTERS -->
        <div class="filters-bar">
            <div class="tabs">
                <button class="tab active" data-sport="all">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</button>
                <button class="tab" data-sport="football">‚öΩ –§—É—Ç–±–æ–ª</button>
                <button class="tab" data-sport="hockey">üèí –•–æ–∫–∫–µ–π</button>
                <button class="tab" data-sport="basket">üèÄ –ë–∞—Å–∫–µ—Ç–±–æ–ª</button>
                <button class="tab" data-sport="esports">üéÆ –ö–∏–±–µ—Ä—Å–ø–æ—Ä—Ç</button>
            </div>

            <div class="filters">
                <select id="gameFilter" class="select">
                    <option value="all">–í—Å–µ –∏–≥—Ä—ã</option>
                </select>

                <label class="checkbox">
                    <input type="checkbox" id="popularOnly" />
                    <span>‚≠ê –¢–æ–ª—å–∫–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ</span>
                </label>

                <input id="searchInput" class="search" placeholder="üîç –ü–æ–∏—Å–∫: –∫–æ–º–∞–Ω–¥–∞ / –ª–∏–≥–∞ / ID" />
            </div>
        </div>

        <!-- HEADER -->
        <header class="header">
            <!-- –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤–∏–¥–µ–æ-–ª–æ–≥–æ—Ç–∏–ø —Å fallback -->
            <div class="logo-container">
                <video class="logo-video" autoplay loop muted playsinline>
                    <source src="prizmbet-logo.mp4" type="video/mp4">
                </video>
                <img src="prizmbet-logo.gif" alt="PRIZMBET" class="logo-fallback">
            </div>
            
            <h1>PRIZMBET</h1>
            <p class="subtitle">–ö—Ä–∏–ø—Ç–æ–±—É–∫–º–µ–∫–µ—Ä –Ω–∞ –º–æ–Ω–µ—Ç–∞—Ö PRIZM</p>
            
            <div style="margin-top: 20px;">
                <a href="https://t.me/+PMrQ9Nbzu08wYmI0" target="_blank" class="btn telegram-btn">
                    üì± Telegram –∫–∞–Ω–∞–ª
                </a>
                <button class="btn" onclick="refreshData()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
            
            <div id="lastUpdate" style="margin-top: 15px; color: var(--neon-purple); font-size: 0.9em;">
                <span class="loading"></span> –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
        </header>

        <!-- STATS -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number" id="totalMatches">0</div>
                <div class="stat-label">–ú–∞—Ç—á–µ–π</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalLeagues">0</div>
                <div class="stat-label">–õ–∏–≥</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="avgOdds">0.00</div>
                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –∫–æ—ç—Ñ.</div>
            </div>
        </div>

        <!-- –ü–†–ê–í–ò–õ–ê (–î–í–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø) -->
        <div class="section rules-section">
            <h2 class="section-title">üìã –ü—Ä–∞–≤–∏–ª–∞ PRIZMBET</h2>
            <div class="rule-images">
                <img src="prizmbet-info-2.png" alt="–ü—Ä–∞–≤–∏–ª–∞ PRIZMBET" class="rule-image" onclick="openImage(this.src)">
                <img src="prizmbet-info-1.png" alt="–ü—Ä–∞–≤–∏–ª–∞ PRIZMBET 2" class="rule-image" onclick="openImage(this.src)">
            </div>
        </div>

        <!-- –ö–û–®–ï–õ–Å–ö -->
        <div class="wallet-section">
            <h2 class="section-title">üí∞ –ö–æ—à–µ–ª—ë–∫ –¥–ª—è —Å—Ç–∞–≤–æ–∫</h2>
            <img src="qr_wallet.png" alt="QR-–∫–æ–¥" class="qr-code">
            <div class="wallet-box">
                <div style="color: var(--neon-purple); margin-bottom: 5px;">–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞:</div>
                <div class="wallet-address" id="walletAddress">PRIZM-4N7T-L2A7-RQZA-5BETW</div>
            </div>
            <button class="btn" onclick="copyWallet()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.7;">
                üí¨ –£–∫–∞–∂–∏—Ç–µ ID —Å–æ–±—ã—Ç–∏—è –∏ —Ç–∏–ø —Å—Ç–∞–≤–∫–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            </p>
        </div>

        <!-- –ú–ê–¢–ß–ò -->
        <div id="content">
            <div style="text-align: center; padding: 40px 20px;">
                <div class="loading" style="width: 50px; height: 50px; margin: 0 auto;"></div>
                <p style="color: var(--neon-purple); font-size: 1.1em; margin-top: 20px;">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–∏–Ω–∏–∏...</p>
            </div>
        </div>

        <!-- –õ–ò–ú–ò–¢–´ -->
        <div class="section">
            <h3 class="section-title">üìä –õ–∏–º–∏—Ç—ã –ø–æ —Å—Ç–∞–≤–∫–∞–º</h3>
            <ul style="list-style: none; padding: 0;">
                <li style="padding: 8px 0;">‚ñ∂ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: 1 500 PRIZM</li>
                <li style="padding: 8px 0;">‚ñ∂ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: 200 000 PRIZM</li>
                <li style="padding: 8px 0;">‚ñ∂ –°—Ç–∞–≤–∫–∏ –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è</li>
            </ul>
        </div>

        <footer style="text-align: center; padding: 30px 15px; opacity: 0.7;">
            <p style="font-size: 1.1em; font-weight: 600;">üíé PRIZMBET 2026</p>
            <p style="margin-top: 10px;">–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–≥—Ä–∞</p>
        </footer>
    </div>

    <div class="bet-toast" id="betToast">
        <div style="color: var(--neon-purple); margin-bottom: 8px;">‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>
        <div class="bet-toast-message" id="betToastMessage"></div>
    </div>

    <script>
        // ===== Scroll progress bar =====
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('scrollProgress').style.width = scrolled + '%';
        });

        // ===== Parallax effect =====
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX / window.innerWidth - 0.5;
            mouseY = e.clientY / window.innerHeight - 0.5;
        });

        // ===== UI Filters state =====
        let currentSportFilter = 'all';
        let currentGameFilter = 'all';

        function getMatchSport(m) {
            return (m.sport || '').toLowerCase() || inferSport(m);
        }

        function inferSport(m) {
            const t = ((m.league || '') + ' ' + (m.team1 || '') + ' ' + (m.team2 || '')).toLowerCase();
            if (t.includes('dota') || t.includes('counter-strike') || t.includes('cs2') || 
                t.includes('valorant') || t.includes('league of legends') || t.includes('lol')) return 'esports';
            if (t.includes('–∫—Ö–ª') || t.includes('–Ω—Ö–ª') || t.includes('hockey')) return 'hockey';
            if (t.includes('nba') || t.includes('–±–∞—Å–∫–µ—Ç')) return 'basket';
            return 'football';
        }

        function getMatchGame(m) {
            if (m.game) return String(m.game);
            const l = (m.league || '').toLowerCase();
            if (l.includes('–ø—Ä–µ–º—å–µ—Ä-–ª–∏–≥–∞') && (l.includes('–∞–Ω–≥–ª–∏—è') || l.includes('england'))) return '–ê–Ω–≥–ª–∏—è. –ü—Ä–µ–º—å–µ—Ä-–ª–∏–≥–∞';
            if (l.includes('–∫—É–±–æ–∫') && (l.includes('–∞–Ω–≥–ª–∏—è') || l.includes('england'))) return '–ê–Ω–≥–ª–∏—è. –ö—É–±–æ–∫';
            if (l.includes('–ª–∏–≥–∞ —á–µ–º–ø–∏–æ–Ω–æ–≤') || l.includes('champions league')) return '–õ–ß –£–ï–§–ê';
            if (l.includes('–ª–∏–≥–∞ –µ–≤—Ä–æ–ø—ã') || l.includes('europa league')) return '–õ–ï –£–ï–§–ê';
            if (l.includes('—Ä–æ—Å—Å–∏—è')) return '–†–æ—Å—Å–∏—è';
            if (l.includes('nba')) return 'NBA';
            if (l.includes('–∫—Ö–ª')) return '–ö–•–õ';
            if (l.includes('atp')) return 'ATP';
            if (l.includes('wta')) return 'WTA';
            if (l.includes('dota')) return 'Dota 2';
            if (l.includes('counter-strike') || l.includes('cs2')) return 'CS2';
            return (m.league || '–î—Ä—É–≥–æ–µ');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function buildGameFilter(matches) {
            const sel = document.getElementById('gameFilter');
            if (!sel) return;

            const set = new Set();
            matches.forEach(m => set.add(getMatchGame(m)));
            const games = Array.from(set).sort((a,b) => a.localeCompare(b, 'ru'));

            const prev = sel.value || 'all';
            sel.innerHTML = '<option value="all">–í—Å–µ –∏–≥—Ä—ã</option>' + games.map(g => `<option value="${escapeHtml(g)}">${escapeHtml(g)}</option>`).join('');
            if (games.includes(prev)) sel.value = prev;
        }

        function applyFilters(matches) {
            const q = (document.getElementById('searchInput')?.value || '').trim().toLowerCase();
            const popularOnly = !!document.getElementById('popularOnly')?.checked;

            return matches.filter(m => {
                const sport = getMatchSport(m);
                const game = getMatchGame(m);

                if (currentSportFilter !== 'all' && sport !== currentSportFilter) return false;
                if (currentGameFilter !== 'all' && game !== currentGameFilter) return false;

                if (popularOnly) {
                    const gl = (game || '').toLowerCase();
                    const ll = (m.league || '').toLowerCase();
                    const ok = (
                        gl.includes('–ø—Ä–µ–º—å–µ—Ä-–ª–∏–≥–∞') || gl.includes('–ª–∏–≥–∞') || gl.includes('—É–µ—Ñ–∞') ||
                        gl.includes('—Ä–æ—Å—Å–∏—è') || gl.includes('nba') || gl.includes('–∫—Ö–ª') ||
                        gl.includes('atp') || gl.includes('wta') ||
                        gl.includes('dota') || gl.includes('cs2')
                    ) || (
                        ll.includes('—Ä–æ—Å—Å–∏—è') || ll.includes('uefa') || ll.includes('—É–µ—Ñ–∞') || ll.includes('–∞–Ω–≥–ª–∏—è') ||
                        ll.includes('nba') || ll.includes('–∫—Ö–ª') || ll.includes('atp') || ll.includes('wta') ||
                        ll.includes('dota') || ll.includes('counter-strike') || ll.includes('cs2')
                    );
                    if (!ok) return false;
                }

                if (q) {
                    const blob = (
                        (m.id||'') + ' ' + (m.league||'') + ' ' + (m.team1||'') + ' ' + (m.team2||'') + ' ' + game
                    ).toLowerCase();
                    if (!blob.includes(q)) return false;
                }

                return true;
            });
        }

        function updateStats(matches) {
            document.getElementById('totalMatches').textContent = matches.length;
            const leagues = new Set(matches.map(m => m.league));
            document.getElementById('totalLeagues').textContent = leagues.size;
            
            const avgOdds = matches.reduce((sum, m) => {
                const p1 = parseFloat(m.p1) || 0;
                const p2 = parseFloat(m.p2) || 0;
                return sum + ((p1 + p2) / 2);
            }, 0) / Math.max(matches.length, 1);
            
            document.getElementById('avgOdds').textContent = avgOdds.toFixed(2);
        }

        function wireFilters() {
            document.querySelectorAll('.tab').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentSportFilter = btn.dataset.sport || 'all';
                    if (window.__ALL_MATCHES__) renderMatches(window.__ALL_MATCHES__);
                });
            });

            const gameSel = document.getElementById('gameFilter');
            if (gameSel) {
                gameSel.addEventListener('change', () => {
                    currentGameFilter = gameSel.value || 'all';
                    if (window.__ALL_MATCHES__) renderMatches(window.__ALL_MATCHES__);
                });
            }

            const search = document.getElementById('searchInput');
            if (search) {
                search.addEventListener('input', () => {
                    if (window.__ALL_MATCHES__) renderMatches(window.__ALL_MATCHES__);
                });
            }

            const pop = document.getElementById('popularOnly');
            if (pop) {
                pop.addEventListener('change', () => {
                    if (window.__ALL_MATCHES__) renderMatches(window.__ALL_MATCHES__);
                });
            }
        }

        let scene, camera, renderer, particles;

        function init3D() {
            const canvas = document.getElementById('threejs-bg');
            scene = new THREE.Scene();
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 50;
            
            renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            
            // –°–æ–∑–¥–∞—ë–º 3000 —á–∞—Å—Ç–∏—Ü –¥–ª—è –±–æ–ª–µ–µ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–≥–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
            const geometry = new THREE.BufferGeometry();
            const particleCount = 3000;
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);
            
            for (let i = 0; i < particleCount * 3; i += 3) {
                // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
                positions[i] = (Math.random() - 0.5) * 200;
                positions[i + 1] = (Math.random() - 0.5) * 200;
                positions[i + 2] = (Math.random() - 0.5) * 200;
                
                // –¶–≤–µ—Ç–∞ –≤ —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ-—Ä–æ–∑–æ–≤–æ–π –≥–∞–º–º–µ
                const color = new THREE.Color();
                color.setHSL(Math.random() * 0.2 + 0.7, 1, 0.5);
                colors[i] = color.r;
                colors[i + 1] = color.g;
                colors[i + 2] = color.b;
            }
            
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            
            const material = new THREE.PointsMaterial({
                size: 0.6,
                vertexColors: true,
                transparent: true,
                opacity: 0.9,
                blending: THREE.AdditiveBlending
            });
            
            particles = new THREE.Points(geometry, material);
            scene.add(particles);
            
            // –û—Å–≤–µ—â–µ–Ω–∏–µ
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            const pointLight = new THREE.PointLight(0xb967ff, 2, 100);
            pointLight.position.set(0, 0, 50);
            scene.add(pointLight);
            
            animate3D();
        }

        function animate3D() {
            requestAnimationFrame(animate3D);
            
            // –ü–∞—Ä–∞–ª–ª–∞–∫—Å —ç—Ñ—Ñ–µ–∫—Ç –æ—Ç –¥–≤–∏–∂–µ–Ω–∏—è –º—ã—à–∏
            camera.position.x += (mouseX * 10 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 10 - camera.position.y) * 0.05;
            camera.lookAt(scene.position);
            
            // –í—Ä–∞—â–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
            particles.rotation.x += 0.0003;
            particles.rotation.y += 0.0005;
            
            // –í–æ–ª–Ω–æ–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
            const positions = particles.geometry.attributes.position.array;
            for (let i = 0; i < positions.length; i += 3) {
                positions[i + 1] += Math.sin(Date.now() * 0.001 + i) * 0.01;
            }
            particles.geometry.attributes.position.needsUpdate = true;
            
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        function renderMatches(allMatches) {
            window.__ALL_MATCHES__ = allMatches;
            
            const filtered = applyFilters(allMatches);
            buildGameFilter(allMatches);
            updateStats(filtered);
            
            const content = document.getElementById('content');
            content.innerHTML = '';
            
            if (!filtered || filtered.length === 0) {
                content.innerHTML = '<div class="section"><p style="text-align: center;">üòî –ú–∞—Ç—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p></div>';
                return;
            }
            
            const leagues = {};
            filtered.forEach(match => {
                if (!leagues[match.league]) leagues[match.league] = [];
                leagues[match.league].push(match);
            });
            
            for (const [league, matches] of Object.entries(leagues)) {
                const section = document.createElement('div');
                section.className = 'section';
                
                const sport = getMatchSport(matches[0]);
                let emoji = '‚öΩ';
                if (sport === 'hockey') emoji = 'üèí';
                if (sport === 'basket') emoji = 'üèÄ';
                if (sport === 'esports') emoji = 'üéÆ';
                
                section.innerHTML = `<h2 class="section-title">${emoji} ${league}</h2>`;
                
                matches.forEach(match => {
                    const card = document.createElement('div');
                    card.className = 'match-card';
                    
                    const team1Escaped = escapeHtml(match.team1 || '');
                    const team2Escaped = escapeHtml(match.team2 || '');
                    const teams = `${team1Escaped} vs ${team2Escaped}`;
                    
                    card.innerHTML = `
                        <div class="match-header">
                            <span class="match-id">${escapeHtml(match.id || '')}</span>
                            <span class="match-time">${escapeHtml(match.date || '')} ${escapeHtml(match.time || '')}</span>
                        </div>
                        <div class="match-teams">${team1Escaped} ‚Äî ${team2Escaped}</div>
                        <div class="odds-container">
                            <div class="odd-item" onclick="copyBet('${escapeHtml(match.id || '')}', '${teams.replace(/'/g, "\\'")}', '–ü1', '${escapeHtml(match.p1 || '0.00')}')">
                                <div class="odd-label">–ü1</div>
                                <div class="odd-value">${escapeHtml(match.p1 || '0.00')}</div>
                            </div>
                            <div class="odd-item" onclick="copyBet('${escapeHtml(match.id || '')}', '${teams.replace(/'/g, "\\'")}', 'X', '${escapeHtml(match.x || '0.00')}')">
                                <div class="odd-label">X</div>
                                <div class="odd-value">${escapeHtml(match.x || '0.00')}</div>
                            </div>
                            <div class="odd-item" onclick="copyBet('${escapeHtml(match.id || '')}', '${teams.replace(/'/g, "\\'")}', '–ü2', '${escapeHtml(match.p2 || '0.00')}')">
                                <div class="odd-label">–ü2</div>
                                <div class="odd-value">${escapeHtml(match.p2 || '0.00')}</div>
                            </div>
                        </div>
                    `;
                    section.appendChild(card);
                });
                
                content.appendChild(section);
            }
        }

        async function loadData() {
            try {
                const response = await fetch('matches.json?t=' + Date.now());
                const data = await response.json();
                renderMatches(data.matches || []);
                document.getElementById('lastUpdate').innerHTML = 
                    '‚è∞ –û–±–Ω–æ–≤–ª–µ–Ω–æ: ' + new Date(data.last_update).toLocaleString('ru-RU');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                document.getElementById('content').innerHTML = 
                    '<div class="section"><p style="text-align: center;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</p></div>';
            }
        }

        async function refreshData() {
            document.getElementById('lastUpdate').innerHTML = '<span class="loading"></span> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...';
            await loadData();
            showToast('‚úÖ –õ–∏–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞!');
        }

        function copyBet(id, teams, betType, coef) {
            const message = `${id} (${teams}) - ${betType} - ${coef}`;
            navigator.clipboard.writeText(message).then(() => {
                showToast(message);
                if (navigator.vibrate) navigator.vibrate(50);
            });
        }

        function copyWallet() {
            const address = document.getElementById('walletAddress').textContent;
            navigator.clipboard.writeText(address).then(() => {
                showToast('üìã –ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
                if (navigator.vibrate) navigator.vibrate(50);
            });
        }

        function showToast(message) {
            const toast = document.getElementById('betToast');
            document.getElementById('betToastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
        }

        function openImage(src) {
            window.open(src, '_blank');
        }

        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —á–∞—Å–æ–≤
        setInterval(() => {
            loadData();
        }, 5 * 60 * 60 * 1000);

        window.addEventListener('load', () => {
            init3D();
            loadData();
            wireFilters();
        });
    </script>
</body>
</html>
