# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Google

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
3. –í–∫–ª—é—á–∏—Ç–µ API:
   - **Google Sheets API**
   - **Google Drive API**

4. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:
   - IAM & Admin ‚Üí Service Accounts ‚Üí Create Service Account
   - Name: `prizmbet-parser`
   - Role: Editor (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—É—é —Å –¥–æ—Å—Ç—É–ø–æ–º —Ç–æ–ª—å–∫–æ –∫ —Ç–∞–±–ª–∏—Ü–µ)

5. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á:
   - Keys ‚Üí Add Key ‚Üí Create new key ‚Üí JSON
   - –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª `credentials.json`

## –®–∞–≥ 2: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google Sheets —Ç–∞–±–ª–∏—Ü—É
2. –ù–∞–∂–º–∏—Ç–µ **Share** (–ü–æ–¥–µ–ª–∏—Ç—å—Å—è)
3. –î–æ–±–∞–≤—å—Ç–µ email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ (–≤–∏–¥–∞ `prizmbet-parser@xxx.iam.gserviceaccount.com`)
4. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ **Editor**

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ GitHub

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Secrets and variables ‚Üí Actions** –∏ –¥–æ–±–∞–≤—å—Ç–µ:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:

| Name | Value |
|------|-------|
| `SPREADSHEET_ID` | ID –≤–∞—à–µ–π Google Sheets —Ç–∞–±–ª–∏—Ü—ã (–∏–∑ URL: `docs.google.com/spreadsheets/d/`**`1QkVj51WMKSd6-LU4vZK3dYPk6QLQIO014ydpACtThNk`**) |
| `GOOGLE_CREDENTIALS` | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `credentials.json` (–≤–µ—Å—å JSON —Ç–µ–∫—Å—Ç) |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã:

| Name | Default | Description |
|------|---------|-------------|
| `WRITE_SHEETS` | `1` | `1` = –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ Sheets, `0` = —Ç–æ–ª—å–∫–æ JSON |
| `SHEET_NAME` | `Matches` | –ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ |

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials.json –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cp /path/to/credentials.json .

# –ó–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export SPREADSHEET_ID="–≤–∞—à_ID_—Ç–∞–±–ª–∏—Ü—ã"
export WRITE_SHEETS=1

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞—Ä—Å–µ—Ä
python marathon_parser.py
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ GitHub Actions:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions ‚Üí Parse Marathon Bet and update Google Sheets**
2. –ù–∞–∂–º–∏—Ç–µ **Run workflow**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Google Sheets ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è

## –®–∞–≥ 5: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

Workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π —á–∞—Å —Å 8:00 –¥–æ 23:00 UTC**.

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.github/workflows/marathon-parser.yml`:
```yaml
on:
  schedule:
    # –ö–∞–∂–¥—ã–π —á–∞—Å
    - cron: '0 * * * *'
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets

–ü–∞—Ä—Å–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

| A | B | C | D | E | F | G | H | I | J | K | L |
|---|---|---|---|---|---|---|---|---|---|---|---|
| sport | league | id | date | time | team1 | team2 | 1 | X | 2 | 1X | 12 | X2 |
| football | –ê–Ω–≥–ª–∏—è. –ü—Ä–µ–º—å–µ—Ä-–ª–∏–≥–∞ | +12345 | 17 —Ñ–µ–≤ | 20:45 | –ê—Ä—Å–µ–Ω–∞–ª | –õ–∏–≤–µ—Ä–ø—É–ª—å | 2.15 | 3.50 | 2.80 | 1.33 | 1.25 | 1.55 |

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ 429 (Quota exceeded)
Google –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç—É –æ—à–∏–±–∫—É –∏ –ø—Ä–æ–±—É–µ—Ç –ø–æ–∑–∂–µ.

### –û—à–∏–±–∫–∞ "credentials.json not found"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç `GOOGLE_CREDENTIALS` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –¢–∞–±–ª–∏—Ü–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. Email —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ç–∞–±–ª–∏—Ü—É —Å –ø—Ä–∞–≤–∞–º–∏ Editor
2. `SPREADSHEET_ID` —É–∫–∞–∑–∞–Ω –≤–µ—Ä–Ω–æ
3. `SHEET_NAME` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ª–∏—Å—Ç–∞

### –ü–∞—Ä—Å–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 –º–∞—Ç—á–µ–π
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Marathon Bet (–≤–æ–∑–º–æ–∂–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å —Ñ–ª–∞–≥–æ–º `full_scan: true`
